<!doctype html>
<html class="theme-next use-motion theme-next-next">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>




  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>


<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.0"/>


    <meta name="description" content="Bob Hamblok's Blog" />



	<meta name="keywords" content="Ampersand.js,Getters and Setters,Object Binding," />

  <title> When and why to use Ampersand.js // bhamblok.io </title>
</head>

<body>
  <div class="container one-column page-post-detail">
    <div class="headband"></div>

    <div id="header" class="header">
      <div class="header-inner">
        <h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand">
      <span class="logo">
        <i class="icon-logo"></i>
      </span>
      <span class="site-title">bhamblok.io</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>


  <ul id="menu" class="menu">
    
      
      <li class="menu-item menu-item-home">
        <a href="/">
          <i class="menu-item-icon icon-home"></i> <br />
          Home
        </a>
      </li>
    
      
      <li class="menu-item menu-item-tags">
        <a href="/tags">
          <i class="menu-item-icon icon-tags"></i> <br />
          Tags
        </a>
      </li>
    
      
      <li class="menu-item menu-item-about">
        <a href="/about">
          <i class="menu-item-icon icon-about"></i> <br />
          About
        </a>
      </li>
    
  </ul>


      </div>
    </div>

    <div id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          
            
          

          <div id="posts" class="posts-expand">
            
  

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              When and why to use Ampersand.js
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          
            Posted on 2015-07-12
          
        </span>

        
          
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/07/12/When-and-why-to-use-AmpersandJS/#comments" >
              <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/07/12/When-and-why-to-use-AmpersandJS/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    
      <div class="post-body">

        
        

        
          <p>Building our project neoScores, we’ve tackled a lot of problems in search for the ideal framework. The more frameworks we tried, the more often we started over again.</p>
<p>In the beginning we were convinced that a full-featured CMS-framework could serve all our needs. Several months later we concluded that the only thing we were actually using of this open-sourced bulky system, was the user-management part of it. Everything else was custom build on top of this framework and … unfortunately … we had <em>“vendor-locked”</em> ourselves.</p>
<p>This blog talks about the bumpy road we’ve taken to end up with something we realy love: <a href="http://ampersandjs.com/" target="_blank" rel="external">Ampersand.js</a>.</p>
<a id="more"></a>
<h2 id="What_do_we_actually_need_from_a_framework?">What do we actually need from a framework?</h2><p>We are working on a Web App which feels like a native app. Our app needs to run offline, so it would be nice if it runs like a single-page website, but then again, we need to show multiple different pages or views, preferably via a path change in the url. Further on, content needs to interact with user’s input or should dynamically be generated via data coming from Object-models.</p>
<blockquote>
<h3 id="1-_Multiple_pages">1. Multiple pages</h3><p>The absolute core-task of our app is to open up different pages, or as it’s called in the web-app-world: <strong><em>views</em></strong>. Because our app runs like a single-page app, we need some kind of a <strong>router</strong> which navigates to different views depending on changes of the path in the url.</p>
<h3 id="2-_Models_and_Collections">2. Models and Collections</h3><p>Our app needs to show some stuff to user. In our case <a href="https://app.neoscores.com" target="_blank" rel="external">neoScores</a>, we need to show a musical score, a piece of Sheet Music. A musical score is a combination of a title, composer, copyrights, (…), and of course a bunch of staffs, notes, bars, accidentals and a lot, lot more. So we need to be able to bundle all these properties into something we can manage easily, while being flexible to change some of the properties via some user input tools.<br>All of these properties together are the construction-blocks of our <strong>“Model”</strong>.</p>
<p>On the other hand, we need to be able to list up all the scores for one user into his “user’s library”. The user needs to be able to make subsections of his library (like “Playlist” or “Setlists”) or he needs to be able to change some properties of all his scores together at once via some user input tools. A <strong>“Collection”</strong> is exactly what can do all of this.</p>
<h3 id="3-_Offline_Use">3. Offline Use</h3><p>Our app is build on top of the concept off <strong>“Offline First”</strong> which means that LOCAL (in-browser) databases (<em>“indexDB”</em>,<em>“WebSQL”</em>,<em>“LocalStorage”</em>) must be addressed to look for the requested data, in combination with our ONLINE databases to synchronise everything with the cloud, in real time, over multiple accounts, devices and platforms.</p>
</blockquote>
<h2 id="Object_Binding">Object Binding</h2><p>From the technical point of view, we should be able to create Models (Objects) and Collections (Arrays of Objects) which bind to the UI (the DOM) automatically. The concept of <em>“Object Binding”</em> is exactly what does all of this. It would be realy … realy … convenient when our code simply updates the screen, just when a value of a property of one of our models has been changed.</p>
<p>So, when somewhere in our code, the value of the title of our score is changed …<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">score.title = <span class="string">'My new title'</span>;</span><br></pre></td></tr></table></figure></p>
<p>… the screen (our view) updates itselves with exactly <em>that</em> string that our variable (score.title) just has been given.</p>
<p>To do just that, a lot needs to be done:</p>
<ul>
<li>you (as the developer) decide that at some point the value of a variable needs to be changed to ‘My new title’. (eg. when the database-request gives a response whith some new data)</li>
<li>an event needs to be triggerd to tell your code “HEY, YOUR VARIABLE (score.title) HAS BEEN CHANGED”</li>
<li>some other code needs to be listening to this “change-event”</li>
<li>when this “other code” picks up this event-trigger which says <em>something has been changed</em>, it needs to update the browsers <em>DOM</em> with the new value.</li>
</ul>
<h2 id="Getters_and_Setters">Getters and Setters</h2><p>Look closely at the code-example above… it just says:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// example for an Ampersand-Model</span></span><br><span class="line">score.title = <span class="string">'My new title'</span>;</span><br></pre></td></tr></table></figure></p>
<p>THAT’S IT!!!! You don’t need to learn some new syntax invented by the creator of some framework. So …, how the hell are all the events I just talked about invoked???</p>
<p>Ampersand.js does that for you using javascript getters and setters.<br>When you (being the developer) define your model (our score)…<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Score = Model.extend(&#123;</span><br><span class="line">	props: &#123;</span><br><span class="line">		title: <span class="string">'string'</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>… Ampersand.js will make a getter and a setter from the property ‘title’.<br>Basically as follows:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// dummy-code</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">constructionOfMyScoreModel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">Object</span>.defineProperty(<span class="keyword">this</span>.prototype,<span class="string">'title'</span>,&#123;</span><br><span class="line">		get: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="comment">// run some magical code</span></span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">this</span>.values.title;</span><br><span class="line">		&#125;,</span><br><span class="line">		set: <span class="function"><span class="keyword">function</span><span class="params">(value)</span> </span>&#123;</span><br><span class="line">			<span class="comment">// run some magical code</span></span><br><span class="line">			<span class="comment">// YIELDING CHANGE EVENTS happens here</span></span><br><span class="line">			<span class="keyword">this</span>.value.title = value;</span><br><span class="line">			<span class="keyword">return</span> value;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Next thing you need to do is to set up some <em>javascript</em> which listens to the events being triggerd from “setting” the value of our “title”-property.<br>Ampersand.js gives us <strong><em>ampersand-views</em></strong> to do just that, a little micro-framework which binds the events from model-properties to the DOM.</p>
<h2 id="What_about_Object-observe?">What about Object.observe?</h2><p>In future, the <em>vanilla javascript</em> feature “Object.observe” is exactly what does all of this (and more), and it will be supported natively in all major browsers. But… the syntax of Object.observe is quit complex to use in a big project. You’ll probably feel the need for some sort of framework to be written arround Object.observe. Ampersand.js does it in an easy way and probably (hopefully) will soon serve as a <em>polyfill</em> whenever your browser supports it.</p>
<h2 id="Ampersand-js_vs_Backbone">Ampersand.js vs Backbone</h2><p><a href="http://backbonejs.org/" target="_blank" rel="external">Backbone</a> is a bulky framework which includes (kind of) everything you will ever need (including <a href="http://underscorejs.org/" target="_blank" rel="external">Underscore.js</a> and <a href="http://jquery.com/" target="_blank" rel="external">JQuery</a>). Backbone also has it’s own syntax which doesn’t feel naturally if you only need to update the value of some property<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Backbone</span></span><br><span class="line">score.set(&#123;title:<span class="string">"My new title"</span>&#125;);</span><br><span class="line"><span class="comment">// Ampersand.js =)</span></span><br><span class="line">score.title = <span class="string">"My new title"</span>;</span><br></pre></td></tr></table></figure></p>
<p>Ampersand.js separates everything in little micro-frameworks which you can require: </p>
<ul>
<li>individually,</li>
<li>whenever you need them,</li>
<li>independantly from each other,</li>
<li>independantly from other frameworks,</li>
<li>mixed together with other frameworks,</li>
<li>…</li>
</ul>
<p>… so you end up with a build-file which includes ONLY the code you actually use!!!<br>And best of all: Ampersand.js mimics Object Binding by using getters and setters behind the screens.</p>
<blockquote>
<h2 id="TL;DR">TL;DR</h2><p>When you start building a new project, a lot of the time you begin to scafold multiple (micro-) frameworks together to end up with a lot of custom scripts to bind one and another together. This often leads to your own bootstrapping-code which more and more becomes to grow and start to look as <strong>your own framework</strong>. </p>
<p>If this sounds familiar, have a look at Ampersand.js.<br>It’s:</p>
<ul>
<li>Lightweight</li>
<li>Performant</li>
<li>Easy to learn</li>
<li>Selfexplenatory</li>
<li>Independant but compatible with any other framework</li>
<li>Opensource and easily accessible to start your own contribution</li>
</ul>
<p>Ampersand.js gives you the standard concepts of other big frameworks like Angular or Backbone (<em>Models</em>, <em>Collections</em> and <em>Views</em>), but it’s all conceived as a combination of micro-frameworks. In other words, you only need to require just that little bit of code you actually use, without having to include a bulky, fully fledged, big ass framework, filled with features you’ll never use.<br>On top of that, the code you write with Ampersand.js looks and feels naturally without having you to learn framework-specific syntax.</p>
</blockquote>
<h2 id="Recommended_reading">Recommended reading</h2><p>If you like a quick start for Ampersand.js, you can read the blog of <a href="http://silvdb.github.io/2015/04/20/ampersand-js-in-a-nutshell/" target="_blank" rel="external">Ampersand.js in a nutshell</a> by community member (and my colleague/employee), <a href="https://twitter.com/Silvdb" target="_blank" rel="external">Silke Van den Broeck</a>.<br>If you like to read more about “Why you should use Ampersand.js”, read on with <a href="https://blog.andyet.com/2014/06/25/introducing-ampersand-js" target="_blank" rel="external">Introducing Ampersand.js</a> by a member of <a href="https://andyet.com/" target="_blank" rel="external">&amp;Yet</a> and co-creator of Ampersand.js <a href="http://andyet.com/team/henrik" target="_blank" rel="external">Henrik Joreteg</a></p>

        
      </div>
    

    
      <div class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/Ampersand-js/">
                #Ampersand.js
              </a>
            
              <a href="/tags/Getters-and-Setters/">
                #Getters and Setters
              </a>
            
              <a href="/tags/Object-Binding/">
                #Object Binding
              </a>
            
          </div>
        

        
          <div class="post-nav">
            <div class="post-nav-prev post-nav-item">
              
            </div>

            <div class="post-nav-next post-nav-item">
              
                <a href="/2015/04/22/performance-of-prototyping-in-javascript/">Performance of Prototyping in Javascript</a>
              
            </div>
          </div>
        

        
        
      </div>
    
  </div>



  
    <div class="comments" id="comments">
      
        <div id="disqus_thread">
          <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </div>
      
    </div>
  

          </div>

          
        </div>

        
<div class="sidebar-toggle">
  <div class="sidebar-toggle-line-wrap">
    <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
    <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
    <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
  </div>
</div>

<div id="sidebar" class="sidebar">
  <div class="sidebar-inner">

    
      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
          Table Of Contents
        </li>
        <li class="sidebar-nav-overview" data-target="site-overview">
          Overview
        </li>
      </ul>
    

    <div class="site-overview">
      <div class="site-author motion-element">
        <img class="site-author-image" src="/images/default_avatar.jpg" alt="Bob Hamblok" />
        <p class="site-author-name">Bob Hamblok</p>
      </div>
      <p class="site-description motion-element">Founder and main developer of neoScores.com ...<br ><br >(Classical) music + javascript<br >=<br >Lots of Fun!!!<br ><br ></p>
      <div class="site-state motion-element">
        <div class="site-state-item site-state-posts">
          <span class="site-state-item-count">3</span>
          <span class="site-state-item-name">posts</span>
        </div>
        <div class="site-state-item site-state-tags">
            <span class="site-state-item-count">7</span>
            <span class="site-state-item-name">tags</span>
        </div>
        <div class="site-state-item site-state-pages">
            <span class="site-state-item-count">2</span>
            <span class="site-state-item-name">pages</span>
        </div>
      </div>

      
        <div class="feed-link motion-element">
          <a href="/rss.xml">
            <i class="menu-item-icon icon-feed"></i>
            RSS
          </a>
        </div>
      

      <div class="links-of-author motion-element">
        
          
            <span class="links-of-author-item">
              <a href="https://twitter.com/bhamblok">twitter</a>
            </span>
          
            <span class="links-of-author-item">
              <a href="https://be.linkedin.com/in/bobhamblok">linkedin</a>
            </span>
          
            <span class="links-of-author-item">
              <a href="https://github.com/bhamblok">github</a>
            </span>
          
        
      </div>

      
      

    </div>

    
      <div class="post-toc-wrap sidebar-panel-active">
        <div class="post-toc-indicator-top post-toc-indicator"></div>
        <div class="post-toc">
          
          
            <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#What_do_we_actually_need_from_a_framework?"><span class="nav-number">1.</span> <span class="nav-text">What do we actually need from a framework?</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-_Multiple_pages"><span class="nav-number">1.1.</span> <span class="nav-text">1. Multiple pages</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-_Models_and_Collections"><span class="nav-number">1.2.</span> <span class="nav-text">2. Models and Collections</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-_Offline_Use"><span class="nav-number">1.3.</span> <span class="nav-text">3. Offline Use</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Object_Binding"><span class="nav-number">2.</span> <span class="nav-text">Object Binding</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Getters_and_Setters"><span class="nav-number">3.</span> <span class="nav-text">Getters and Setters</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#What_about_Object-observe?"><span class="nav-number">4.</span> <span class="nav-text">What about Object.observe?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Ampersand-js_vs_Backbone"><span class="nav-number">5.</span> <span class="nav-text">Ampersand.js vs Backbone</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#TL;DR"><span class="nav-number">6.</span> <span class="nav-text">TL;DR</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Recommended_reading"><span class="nav-number">7.</span> <span class="nav-text">Recommended reading</span></a></li></ol></div>
          
        </div>
        <div class="post-toc-indicator-bottom post-toc-indicator"></div>
      </div>
    

  </div>
</div>


      </div>
    </div>

    <div id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; &nbsp; 
  2015
  <span class="with-love">
    <i class="icon-heart"></i>
  </span>
  <span class="author">Bob Hamblok</span>
</div>



      </div>
    </div>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      $(".fancybox").fancybox();
    });
  </script>

  <script type="text/javascript">
  function hasMobileUA () {
    var nav = window.navigator;
    var ua = nav.userAgent;
    var pa = /iPad|iPhone|Android|Opera Mini|BlackBerry|webOS|UCWEB|Blazer|PSP|IEMobile|Symbian/g;

    return pa.test(ua);
  }

  function isDesktop () {
    return screen.width > 991 && !hasMobileUA();
  }

  function isTablet () {
    return screen.width < 992 && screen.width > 767 && hasMobileUA();
  }

  function isMobile () {
    return screen.width < 767 && hasMobileUA();
  }

  function escapeSelector (selector) {
    return selector.replace(/[!"$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g, "\\$&")
  }
</script>

  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" id="motion.global">
  $(document).ready(function () {
    var body = $('body');
    var isSidebarVisible = false;
    var sidebarToggle = $('.sidebar-toggle');
    var sidebarToggleLine1st = $('.sidebar-toggle-line-first')
    var sidebarToggleLine2nd = $('.sidebar-toggle-line-middle');
    var sidebarToggleLine3rd = $('.sidebar-toggle-line-last');
    var sidebar = $('.sidebar');

    var SIDEBAR_WIDTH = '320px';
    var SIDEBAR_DISPLAY_DURATION = 300;

    var sidebarToogleLineStatusInit = {width: '100%', opacity: 1, left: 0, rotateZ: 0, top: 0};

    var sidebarToggleLine1stStatusInit = sidebarToogleLineStatusInit;
    var sidebarToggleLine1stStatusArrow = {width: '50%', rotateZ: '-45deg', top: '2px'};
    var sidebarToogleLine1stStatusClose = {width: '100%', rotateZ: '-45deg', top: '5px'};

    var sidebarToggleLine2ndStatusInit = sidebarToogleLineStatusInit;
    var sidebarToggleLine2ndStatusArrow = {width: '90%'};
    var sidebarToogleLine2ndStatusClose = {opacity: 0};

    var sidebarToggleLine3rdStatusInit = sidebarToogleLineStatusInit;
    var sidebarToggleLine3rdStatusArrow = {width: '50%', rotateZ: '45deg', top: '-2px'};
    var sidebarToogleLine3rdStatusClose = {width: '100%', rotateZ: '45deg', top: '-5px'};

    LogoAndMenuMotion();
    sidebatToggleMotion();
    postsListMotion();
    backToTopMotion();


    $(document)
      .on('sidebar.isShowing', function () {
        isDesktop() && body.velocity(
          {paddingRight: SIDEBAR_WIDTH},
          SIDEBAR_DISPLAY_DURATION
        );
        sidebarContentMotion();
      })
      .on('sidebar.isHiding', function () {});

    function LogoAndMenuMotion() {
      $.Velocity.RunSequence([
        { e: $('.brand'), p: { opacity: 1 }, o: { duration: 100 } },
        { e: $('.logo'), p: { opacity: 1, top: 0 }, o: { duration: 50} },
        
        { e: $('.logo-line-before i'), p: { translateX: "100%" }, o: { duration: 500, sequenceQueue: false } },
        { e: $('.logo-line-after i'), p: { translateX: "-100%" }, o: { duration: 500, sequenceQueue: false } },
        
        { e: $('.site-title'), p: { opacity: 1, top: 0 }, o: { duration: 200 } }
      ]);
      $('.menu-item').velocity('transition.slideDownIn', {display: null});
    }


    function backToTopMotion () {
      var b2top = $('.back-to-top');
      b2top.on('click', function () {
        body.velocity('scroll');
      });
    }

    function sidebarShowMotion () {

      sidebarToggleLine1st.velocity(sidebarToogleLine1stStatusClose);
      sidebarToggleLine2nd.velocity(sidebarToogleLine2ndStatusClose);
      sidebarToggleLine3rd.velocity(sidebarToogleLine3rdStatusClose);

      sidebar.velocity({width: SIDEBAR_WIDTH}, {
        display: 'block',
        duration: SIDEBAR_DISPLAY_DURATION,
        complete: function () {
          sidebar.addClass('sidebar-active');
          sidebar.trigger('sidebar.didShow');
        }
      });
      sidebar.trigger('sidebar.isShowing');
    }

    function sidebarHideMotion () {
      isDesktop() && body.velocity({paddingRight: 0});
      sidebar.velocity('reverse');

      sidebarToggleLine1st.velocity(sidebarToggleLine1stStatusInit);
      sidebarToggleLine2nd.velocity(sidebarToggleLine2ndStatusInit);
      sidebarToggleLine3rd.velocity(sidebarToggleLine3rdStatusInit);

      sidebar.removeClass('sidebar-active');
      sidebar.trigger('sidebar.isHiding');
    };

    function sidebarContentMotion () {
      $('.sidebar .motion-element').velocity(
        'transition.slideRightIn',
        {stagger: 50, drag: true}
      );
    }

    function postsListMotion () {
      var postMotionOptions = window.postMotionOptions || {stagger: 300, drag: true};
      $('.post').velocity('transition.slideDownIn', postMotionOptions);
    }

    function sidebatToggleMotion () {
      sidebarToggle.on('click', function () {
        isSidebarVisible ? sidebarHideMotion() : sidebarShowMotion();
        isSidebarVisible = !isSidebarVisible;
      });

      sidebarToggle.hover(function () {
        if (isSidebarVisible) {return}
        sidebarToggleLine1st.velocity('stop').velocity(sidebarToggleLine1stStatusArrow);
        sidebarToggleLine2nd.velocity('stop').velocity(sidebarToggleLine2ndStatusArrow);
        sidebarToggleLine3rd.velocity('stop').velocity(sidebarToggleLine3rdStatusArrow);
      }, function () {
        if (isSidebarVisible) {return}
        sidebarToggleLine1st.velocity('stop').velocity(sidebarToggleLine1stStatusInit);
        sidebarToggleLine2nd.velocity('stop').velocity(sidebarToggleLine2ndStatusInit);
        sidebarToggleLine3rd.velocity('stop').velocity(sidebarToggleLine3rdStatusInit);
      });
    }
  });

</script>





  
  
<script type="text/javascript" id="bootstrap.scrollspy.custom">
  /* ========================================================================
  * Bootstrap: scrollspy.js v3.3.2
  * http://getbootstrap.com/javascript/#scrollspy
  * ========================================================================
  * Copyright 2011-2015 Twitter, Inc.
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
  * ======================================================================== */

  /**
   * Custom by iissnan
   *
   * - Add a `clear.bs.scrollspy` event.
   * - Esacpe targets selector.
   */


  +function ($) {
    'use strict';

    // SCROLLSPY CLASS DEFINITION
    // ==========================

    function ScrollSpy(element, options) {
      this.$body          = $(document.body)
      this.$scrollElement = $(element).is(document.body) ? $(window) : $(element)
      this.options        = $.extend({}, ScrollSpy.DEFAULTS, options)
      this.selector       = (this.options.target || '') + ' .nav li > a'
      this.offsets        = []
      this.targets        = []
      this.activeTarget   = null
      this.scrollHeight   = 0

      this.$scrollElement.on('scroll.bs.scrollspy', $.proxy(this.process, this))
      this.refresh()
      this.process()
    }

    ScrollSpy.VERSION  = '3.3.2'

    ScrollSpy.DEFAULTS = {
      offset: 10
    }

    ScrollSpy.prototype.getScrollHeight = function () {
      return this.$scrollElement[0].scrollHeight || Math.max(this.$body[0].scrollHeight, document.documentElement.scrollHeight)
    }

    ScrollSpy.prototype.refresh = function () {
      var that          = this
      var offsetMethod  = 'offset'
      var offsetBase    = 0

      this.offsets      = []
      this.targets      = []
      this.scrollHeight = this.getScrollHeight()

      if (!$.isWindow(this.$scrollElement[0])) {
        offsetMethod = 'position'
        offsetBase   = this.$scrollElement.scrollTop()
      }

      this.$body
        .find(this.selector)
        .map(function () {
          var $el   = $(this)
          var href  = $el.data('target') || $el.attr('href')
          var $href = /^#./.test(href) && $(escapeSelector(href)) // Need to escape selector.

          return ($href
            && $href.length
            && $href.is(':visible')
            && [[$href[offsetMethod]().top + offsetBase, href]]) || null
        })
        .sort(function (a, b) { return a[0] - b[0] })
        .each(function () {
          that.offsets.push(this[0])
          that.targets.push(this[1])
        })


    }

    ScrollSpy.prototype.process = function () {
      var scrollTop    = this.$scrollElement.scrollTop() + this.options.offset
      var scrollHeight = this.getScrollHeight()
      var maxScroll    = this.options.offset + scrollHeight - this.$scrollElement.height()
      var offsets      = this.offsets
      var targets      = this.targets
      var activeTarget = this.activeTarget
      var i

      if (this.scrollHeight != scrollHeight) {
        this.refresh()
      }

      if (scrollTop >= maxScroll) {
        return activeTarget != (i = targets[targets.length - 1]) && this.activate(i)
      }

      if (activeTarget && scrollTop < offsets[0]) {
        $(this.selector).trigger('clear.bs.scrollspy')  // Add a custom event.
        this.activeTarget = null
        return this.clear()
      }

      for (i = offsets.length; i--;) {
        activeTarget != targets[i]
          && scrollTop >= offsets[i]
          && (!offsets[i + 1] || scrollTop <= offsets[i + 1])
          && this.activate(targets[i])
      }
    }

    ScrollSpy.prototype.activate = function (target) {
      this.activeTarget = target

      this.clear()

      var selector = this.selector +
        '[data-target="' + target + '"],' +
        this.selector + '[href="' + target + '"]'

      var active = $(selector)
        .parents('li')
        .addClass('active')

      if (active.parent('.dropdown-menu').length) {
        active = active
          .closest('li.dropdown')
          .addClass('active')
      }

      active.trigger('activate.bs.scrollspy')
    }

    ScrollSpy.prototype.clear = function () {
      $(this.selector)
        .parentsUntil(this.options.target, '.active')
        .removeClass('active')
    }


    // SCROLLSPY PLUGIN DEFINITION
    // ===========================

    function Plugin(option) {
      return this.each(function () {
        var $this   = $(this)
        var data    = $this.data('bs.scrollspy')
        var options = typeof option == 'object' && option

        if (!data) $this.data('bs.scrollspy', (data = new ScrollSpy(this, options)))
        if (typeof option == 'string') data[option]()
      })
    }

    var old = $.fn.scrollspy

    $.fn.scrollspy             = Plugin
    $.fn.scrollspy.Constructor = ScrollSpy


    // SCROLLSPY NO CONFLICT
    // =====================

    $.fn.scrollspy.noConflict = function () {
      $.fn.scrollspy = old
      return this
    }


    // SCROLLSPY DATA-API
    // ==================

    $(window).on('load.bs.scrollspy.data-api', function () {
      $('[data-spy="scroll"]').each(function () {
        var $spy = $(this)
        Plugin.call($spy, $spy.data())
      })
    })

  }(jQuery);
</script>


<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var $sidebarInner = $('.sidebar-inner');
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.didShow', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;
          var self = this;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      $(indicator).velocity('stop').velocity({
        opacity: action === 'show' ? 0.4 : 0
      }, { duration: 100 });
    }

  });
</script>


  <script type="text/javascript" id="sidebar.nav">
    $(document).ready(function () {
      var html = $('html');

      $('.sidebar-nav li').on('click', function () {
        var item = $(this);
        var activeTabClassName = 'sidebar-nav-active';
        var activePanelClassName = 'sidebar-panel-active';
        if (item.hasClass(activeTabClassName)) {
          return;
        }

        var currentTarget = $('.' + activePanelClassName);
        var target = $('.' + item.data('target'));

        currentTarget.velocity('transition.slideUpOut', 200, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', 200)
            .addClass(activePanelClassName);
        });

        item.siblings().removeClass(activeTabClassName);
        item.addClass(activeTabClassName);
      });

      $('.post-toc a').on('click', function (e) {
        e.preventDefault();
        var offset = $(escapeSelector(this.getAttribute('href'))).offset().top;
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        });
      });

      // Expand sidebar on post detail page by default, when post has a toc.
      var $tocContent = $('.post-toc-content');
      if ($tocContent.length > 0 && $tocContent.html().trim().length > 0 && isDesktop()) {
        setTimeout(function () {
          $('.sidebar-toggle').trigger('click');
        }, 800);
      }
    });
  </script>




  

  
  

  

    
      
    

    <script type="text/javascript">
      var disqus_shortname = 'bhamblok';
      var disqus_identifier = '2015/07/12/When-and-why-to-use-AmpersandJS/';
      var disqus_url = 'http://bhamblok.io/2015/07/12/When-and-why-to-use-AmpersandJS/';

      (function(){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }());
    </script>
  


  
  <script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-61944586-1', 'auto');
	  ga('send', 'pageview');

	</script>


</body>
</html>
